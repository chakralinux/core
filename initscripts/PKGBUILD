#
# Chakra Packages for Chakra, part of chakra-project.org
#
# maintainer: Manuel Tortosa <manutortosa[at]chakra-project[dot]org>

pkgname=initscripts
pkgver=2012.05
pkgrel=2
pkgdesc="System initialization/bootup scripts"
arch=('i686' 'x86_64')
url="http://www.chakra-project.org"
license=('GPL2')
groups=('base')
backup=(etc/inittab etc/rc.conf etc/rc.local etc/rc.local.shutdown etc/conf.d/wireless etc/locale.conf)
depends=('glibc' 'bash' 'grep' 'coreutils' 'udev>=182' 'iproute2'
         'ncurses' 'kbd' 'findutils' 'sysvinit')
optdepends=('net-tools: legacy networking support'
            'bridge-utils: Network bridging support'
            'dhcpcd: DHCP network configuration'
            'wireless_tools: Wireless networking')
makedepends=(asciidoc)
install=initscripts.install
source=('Makefile' 'binfmt.d.5.txt' 'chakra-tmpfiles' 'hostname.5.txt' 'locale.conf.5.txt'
        'network' 'rc.d.8.txt' 'rc.shutdown' 'wireless.conf.d' 'bootlog' 'chakra-tmpfiles'
        'hwclock' 'locale.conf.5.txt' 'rc.conf' 'rc.local' 'rc.single' 'zsh-completion'
        'chakra-binfmt' 'functions' 'initscripts.install' 'locale.sh' 'rc.conf.5.txt'
        'rc.local.shutdown' 'rc.sysinit' 'bash-completion' 'chakra-sysctl' 'inittab' 'netfs'
        'rc.d' 'rc.multi' 'tmpfiles.conf' 'vconsole.conf.5.txt')
md5sums=('022d743d6c324fa1325d8187e9354365'
         '94bf95df61a06ec45107c4ce9bb59439'
         '31969954d2762f5a1f0118f1843a9975'
         'bdb87ed9c8bd97fcc8ae0c643909c813'
         'b772c5a6489881f796a6ec13a4e48cc3'
         'e886ba94b6d5fd7987ecf9dfee7cbab3'
         '52e1a2dd6339d88eda50d7c990a4513c'
         'e4798daef2b565e3b6f2ec5e0d5ce3d2'
         'dc5462ed765fa34c907f974d67fb776a'
         '5d253f4da16e543efaff53ac9684c1c6'
         '31969954d2762f5a1f0118f1843a9975'
         '75e147e59b91751b451dcc7bab225278'
         'b772c5a6489881f796a6ec13a4e48cc3'
         '727e677a2dca88a9dde4fc5846076b69'
         'bd236a57bc00aa4727b98c5ae401c457'
         'bbdeefad2a1732af6b04484b02527266'
         '00ee10313b866a3fe6520a86f6318518'
         'd98b09250e49a09cd6f33fa296ebe24b'
         'a6affe9c73bd416a97d727a54b0b40dd'
         'c366072d0b230eb9ee7ab31dd77cf245'
         'b910fd6e0b5c421d083de72da03d9d1a'
         'ac2d6d1cf7df7d65efc90b7766fceae1'
         '669ce6d766dd9deb86686219f3763fe4'
         '9b0244348a8acdf179026f46b3cd4d30'
         '7d4981aa562187a5fc163ca2677a7cc1'
         'db5f12c6d239c94c6cac6a606dd8f653'
         'da9949f67b9100f8b03f4f2c81ff1108'
         '5f61e38df0816d4a265f7c27958f2411'
         'f528320f16c50d2cb5ad71079bf5f957'
         'f3f55aa80da56b1435e8a876bbe18c72'
         '2eb9f00e48115a7d19365872cddaa04d'
         '7a1e90a17a9f6a89817fb9800fbc54a2')

package() {
  cd ${srcdir}
  make DESTDIR=${pkgdir} install
  install -D -m644 ${srcdir}/wireless.conf.d ${pkgdir}/etc/conf.d/wireless

  # Avoid conflicts
  mv ${pkgdir}/etc/profile.d/locale.sh ${pkgdir}/etc/profile.d/locale.sh.new
}
