#
# Platform Packages for Chakra, part of chakra-project.org
#
# contributor (x86_64): Giuseppe Cal√† <jiveaxe@gmail.com>

# include global config
source ../_buildscripts/${current_repo}-${_arch}-cfg.conf

pkgname=linphone
pkgver=3.3.2
pkgrel=1
pkgdesc="A Voice-over-IP phone. CLI version only."
arch=('i686' 'x86_64')
url="http://www.linphone.org/index.php/eng"
license=('GPL')
depends=('alsa-lib' 'ffmpeg' 'libexosip2' 'speex' 'libv4l' 'v4l-utils' 'libpulse')
makedepends=('pkgconfig' 'perlxml' 'intltool')
optdepends=('pulseaudio')
conflicts=(ortp)
provides=(ortp)
options=('!libtool' '!emptydirs')
source=(http://download.savannah.gnu.org/releases/linphone/3.3.x/sources/linphone-$pkgver.tar.gz)
md5sums=('6ede06d2cd67aa8d495296afd4ba53cb')

build() {
  cd "$srcdir/$pkgname-$pkgver"
  export PKG_CONFIG=/usr/bin/pkg-config
  ./configure --prefix=/usr --disable-static --enable-ipv6 --enable-video --enable-gtk_ui=no \
    --enable-alsa --enable-pulseaudio --disable-artsc --disable-strict --libexecdir=/usr/lib/$pkgname
  make
  make DESTDIR="$pkgdir" install
}
