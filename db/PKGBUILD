# maintainer abveritas[at]chakra-project[dot]org>

pkgname=db
pkgver=6.1.26
pkgrel=1
pkgdesc="The Berkeley DB embedded database system"
arch=('x86_64')
url="http://www.oracle.com/technetwork/database/database-technologies/berkeleydb/downloads/index.html"
license=('custom')
depends=('gcc-libs' 'sh')
install=db.install
source=("http://download.oracle.com/berkeley-db/db-${pkgver}.tar.gz")
sha1sums=('5ae05c6c4a1766270fd5cfb28539e2b7a19c33b2')

build() {
  cd ${srcdir}/$pkgname-${pkgver}/build_unix
  ../dist/configure --prefix=/usr --enable-compat185 \
    --enable-shared --enable-static --enable-cxx --enable-dbm \
    --enable-stl
  make LIBSO_LIBS=-lpthread
}

package() {
  cd ${srcdir}/$pkgname-${pkgver}/build_unix
  make DESTDIR=${pkgdir} install
  rm -rf ${pkgdir}/usr/docs
  install -Dm644 ${srcdir}/${pkgname}-${pkgver}/LICENSE \
    ${pkgdir}/usr/share/licenses/${pkgname}/LICENSE
}
