# Platform Packages for Chakra, part of chakra-project.org
#
# Maintainer: Neophytos Kolokotronis <tetris4@gmail.com>
# Contributor: Balwinder S "bsd" Dheeman (bdheeman AT gmail.com)
#
# include global config
source ../_buildscripts/${current_repo}-${_arch}-cfg.conf

pkgname=dkms
pkgver=2.2.0.2
pkgrel=2
pkgdesc="A Dynamic Kernel Modules System or Framework"
arch=('any')
url=http://linux.dell.com/dkms/
license=('GPL')
depends=('linux-headers')
backup=('etc/dkms/framework.conf')
install=dkms.install
changelog=ChangeLog
source=(http://linux.dell.com/$pkgname/permalink/$pkgname-$pkgver.tar.gz
    'dkms_autoinstaller.patch')

build() {
    : need not build anything, huh
}

package() {
    cd "$srcdir/$pkgname-$pkgver"
    make DESTDIR="$pkgdir" install

    # patch dkms, rc_script and create symlink
    patch -d$pkgdir -p1 -i $srcdir/dkms_autoinstaller.patch
    mkdir -p $pkgdir/etc/rc.d
    ln -s ../../usr/lib/dkms/dkms_autoinstaller $pkgdir/etc/rc.d/
}

# vim:set ts=2 sw=2 et:
md5sums=('4651508139708392622ff52a46c8649c'
         '7579369855140bcfa019409fe4ddb163')
