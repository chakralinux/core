#
# Platform Packages for Chakra, part of chakra-project.org
#
# maintainer: Manuel Tortosa <manutortosa[at]chakra-project[dot]org>

pkgname=smpeg2
pkgver=2.0.0
pkgrel=1
pkgdesc="SDL2 MPEG Player Library"
arch=('i686' 'x86_64')
url="http://icculus.org/smpeg/"
license=('LGPL')
depends=('sdl2' 'gcc-libs')
makedepends=('svn')
options=('!libtool')
source=("${pkgname}::svn://svn.icculus.org/smpeg/tags/release_${pkgver//./_}")
md5sums=('SKIP')

build() {
  cd ${srcdir}/${pkgname}
  ./autogen.sh
  ./configure --prefix=/usr \
              --mandir=/usr/share/man \
              --disable-static
  make
}

package() {
  cd ${srcdir}/${pkgname}
  make DESTDIR=${pkgdir} install

  # hacky way of resolving conflicts
  rm ${pkgdir}/usr/bin/plaympeg
  rm -r ${pkgdir}/usr/share/man
}
