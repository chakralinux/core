#
# Chakra Packages for Chakra, part of chakra-project.org
#
# maintainer (i686): Phil Miller <philm[at]chakra-project[dog]org>
# maintainer (x86_64): Manuel Tortosa <manutortosa[at]chakra-project[dot]org>

_origname=initscripts
pkgname=initscripts-live
pkgver=2011.12.1.1
pkgrel=1
pkgdesc="System initialization/bootup scripts"
arch=('i686' 'x86_64')
url="http://www.chakra-project.org"
license=('GPL2')
groups=('livecd')
provides=("initscripts=${pkgver}")
conflicts=('initscripts' 'chakra-initscripts')
backup=(etc/inittab etc/rc.conf etc/rc.local etc/rc.local.shutdown etc/conf.d/wireless)
depends=('glibc' 'bash' 'grep' 'coreutils' 'udev>=174' 'iproute2'
         'ncurses' 'kbd' 'findutils' 'sysvinit')
makedepends=('asciidoc')         
optdepends=('bridge-utils: Network bridging support'
            'dhcpcd: DHCP network configuration'
            'net-tools: legacy network support'
            'wireless_tools: Wireless networking')
source=("http://chakra.sourceforge.net/sources/${_origname}/${_origname}-${pkgver}.tar.xz"
        'http://chakra.sourceforge.net/sources/initscripts/wireless.conf.d'
        "http://chakra.sourceforge.net/sources/initscripts/${pkgname}-2011.12.1-4.patch")
sha256sums=('c4df150201a5194dd0eb0973b53998ae84eaaf7443b3aaefa1f37f4d902d2f90'
            '0eba4250b07e0a727ef64772f5ee9027b123cbd4bb0894ba2842f545035c827f'
            '01c28b517af61061dd475f36045fa0ddce93223a63cbc8ecc8bf86cf66feb2be')

package() {
  cd ${srcdir}/chakra-${_origname}
  make DESTDIR=${pkgdir} install
  install -D -m644 ${srcdir}/wireless.conf.d ${pkgdir}/etc/conf.d/wireless
  cd ${pkgdir}
  patch -Np1 -i ${srcdir}/${pkgname}-2011.12.1-4.patch || return 1
  #rm -v $(find . -type f -name '*.orig')
}
