# Maintainer: Daniele Cocca <jmc@chakra-project.org>

pkgbase=v8
pkgname=('v8' 'v8-src')
pkgver=3.9
pkgrel=1
arch=('x86_64')
url="http://code.google.com/p/v8/"
license=('BSD')
makedepends=('python2' 'subversion' 'readline')
source=("http://chakra.sourceforge.net/sources/${pkgname}/${pkgname}-${pkgver}.tar.xz")
md5sums=('b3357ba6fa2adf130f068c12318fb994')

build() {
  cd "${srcdir}/${pkgname}-${pkgver}"
  make dependencies
  make x64.release library=shared console=readline
}

package_v8() {
pkgdesc="V8 is Google's open source JavaScript engine."
depends=('glibc' 'gcc-libs' 'readline')

  cd "${srcdir}/${pkgname}-${pkgver}/out/x64.release"

  install -D -m755 lib.target/libv8.so \
                   "${pkgdir}/usr/lib/libv8.so"

  install -D -m755 d8 \
                   "${pkgdir}/usr/bin/d8"
}

package_v8-src() {
pkgdesc="V8 is Google's open source JavaScript engine. (Source package)"

  install -d "${pkgdir}/usr/src/v8"
  tar -Jxf "${srcdir}/${pkgbase}-${pkgver}.tar.xz" \
        -C "${pkgdir}/usr/src/v8"
}

# vim:set ts=2 sw=2 et:
