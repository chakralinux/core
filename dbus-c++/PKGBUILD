#
# Platform Packages for Chakra, part of chakra-project.org
#
# maintainer: abveritas[at]chakra-project[dot]org>
# Contributor: Zarra <zarraxx@gmail.com>

pkgname=dbus-c++
pkgver=0.9.0
pkgrel=1
pkgdesc="dbus-c++ attempts to provide a C++ API for D-BUS"
url="http://sourceforge.net/projects/dbus-cplusplus/"
arch=('i686' 'x86_64')
license=('GPL')
depends=('dbus>=1.2.0' 'glib2')
makedepends=('autoconf' 'automake')
source=("http://sourceforge.net/projects/dbus-cplusplus/files/dbus-c%2B%2B/0.9.0/libdbus-c%2B%2B-0.9.0.tar.gz"
	"patch-gcc47.patch")
md5sums=('e752116f523fa88ef041e63d3dee4de2'
	'9319b402b15f37d881b51bc758368900')
options=('!libtool')

build() {
    cd "${srcdir}/libdbus-c++-${pkgver}"
    patch -p0 < ${srcdir}/patch-gcc47.patch
    export LDFLAGS="${LDFLAGS} -lexpat"
    ./autogen.sh --prefix=/usr --disable-static --enable-glib --disable-ecore
    make
}

package() {
    cd "${srcdir}/libdbus-c++-${pkgver}"
    make DESTDIR=${pkgdir} install
}
