#
# Platform Packages for Chakra, part of chakra-project.org
#
# maintainer (i686): Phil Miller <philm[at]chakra-project[dog]org>
# maintainer (x86_64): Manuel Tortosa <manutortosa[at]chakra-project[dot]org>

# include global config
source ../_buildscripts/${current_repo}-${_arch}-cfg.conf

pkgname=fontforge
pkgver=20110222
pkgrel=1
pkgdesc="An outline and bitmap font editor"
arch=('i686' 'x86_64')
url="http://fontforge.sourceforge.net"
license=('BSD')
depends=('libxkbui' 'libxi' 'libxml2' 'pango' 'giflib' 'libpng' 'libtiff' 'libjpeg' 'python')
options=('!libtool' '!makeflags')
source=(http://downloads.sourceforge.net/sourceforge/fontforge/fontforge_full-${pkgver}.tar.bz2)
sha1sums=('8fada07647f102351bb1d7d1c4da487356e7142f')

build() {
  cd "${srcdir}/${pkgname}-${pkgver}"
  #patch -p1 < ../libpng14.patch || return 1
  ./configure --prefix=/usr --mandir=/usr/share/man --enable-type3 --enable-double \
    --enable-devicetables --with-regular-link --with-python2 --enable-pyextensions || return 1
  make || return 1
  make DESTDIR="${pkgdir}" install || return 1
  install -D -m644 LICENSE "${pkgdir}/usr/share/licenses/${pkgname}/LICENSE" || return 1
}
