# Contributor: Neophytos Kolokotronis <tetris4 AT gmail DOT com>
# Maintainer: abveritas[at]chakra-project[dot]org>

_pkgname=frei0r-plugins
pkgname=frei0r-plugins-qt5
pkgver=1.4
pkgrel=1
pkgdesc="frei0r is a minimalistic plugin API for video sources and filters."
arch=('x86_64')
url="http://www.piksel.org/frei0r"
license=('GPL')
depends=('gcc-libs' 'gavl' 'opencv-qt5')
makedepends=('doxygen')
options=('!emptydirs')
source=("https://distfiles.macports.org/frei0r-plugins/frei0r-plugins-1.4.tar.gz"
        "opencv.patch")
md5sums=('202375d1bcb545c1b6eb8f34e0260ec5'
         '5f254918dfd1dd1523ad70771048032b')

prepare() {
  cd "$srcdir/$_pkgname-$pkgver"
  patch -Np1 -i ../opencv.patch
}

build() {
  cd "$srcdir/$_pkgname-$pkgver"

  export PKG_CONFIG_PATH=/opt/opencv-qt5/lib/pkgconfig
  ./autogen.sh
  ./configure --prefix=/opt/opencv-qt5
  make
}

package() {
  cd "$srcdir/$_pkgname-$pkgver"
  
  make DESTDIR="$pkgdir" install 
}

md5sums=('202375d1bcb545c1b6eb8f34e0260ec5'
         '1fa4be922bedd10698139f5019d5bd20')
md5sums=('202375d1bcb545c1b6eb8f34e0260ec5'
         'b44ebddd8534b807d66097196723b35c')
md5sums=('202375d1bcb545c1b6eb8f34e0260ec5'
         'bf62c8fa131c55a41137c8df5dd3b0ac')
md5sums=('202375d1bcb545c1b6eb8f34e0260ec5'
         'ab2afbbb6d3e32d8c7579e7443104390')
md5sums=('202375d1bcb545c1b6eb8f34e0260ec5'
         '5f254918dfd1dd1523ad70771048032b')
md5sums=('202375d1bcb545c1b6eb8f34e0260ec5'
         '67dfc59f35652174b4b4b7a7e889a95b')
md5sums=('202375d1bcb545c1b6eb8f34e0260ec5'
         '95c1470b3b87781ffd7e7b504b235890')
md5sums=('202375d1bcb545c1b6eb8f34e0260ec5'
         'a17af4f8b21f5e81ad04ae27c71e3702')
md5sums=('202375d1bcb545c1b6eb8f34e0260ec5'
         '3b612cfcd983998f6bcdb5b5d57a41f2')
md5sums=('202375d1bcb545c1b6eb8f34e0260ec5'
         '668d5806c153cbf17024c97b5346f290')
md5sums=('202375d1bcb545c1b6eb8f34e0260ec5'
         '668d5806c153cbf17024c97b5346f290')
md5sums=('202375d1bcb545c1b6eb8f34e0260ec5'
         '6ed33460798258af6dfa9d804e594be0')
md5sums=('202375d1bcb545c1b6eb8f34e0260ec5'
         'e629f360fd436432cba82346ad928eee')
