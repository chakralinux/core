#
# Chakra Packages for Chakra, part of chakra-project.org
#
# maintainer abveritas@chakra-project.org

pkgname=chakra-hardware-detection
pkgver=20150119
pkgrel=1
branch="master"
pkgdesc="Hardware detection scripts for Chakra"
arch=('any')
url="http://www.chakra-project.org"
depends=('bc' 'util-linux' 'chd-nvidia>=346' 'chd-nvidia<347' 'chd-nvidia-340xx' 'chd-nvidia-304xx'
         'chd-catalyst' 'dmidecode') 
license=('GPL')
source=("${pkgname}-${pkgver}.tar.gz"::"http://gitorious.org/chakra/chakra-hardware-detection/archive-tarball/${branch}")
md5sums=('b8d89d7647b7dd5c6e0d38d30c843f27')

# create tarball: source PKGBUILD && mksource

mksource() {
	if [ "${1}" == "" ] ; then
	  git clone git://gitorious.org//chakra/${pkgname}.git ${pkgname}-${pkgver}
	else
	  git clone -b "${1}" git://gitorious.org//chakra/${pkgname}.git ${pkgname}-${pkgver}
	fi
	pushd ${pkgname}-${pkgver}
	popd
	tar -cvJf ${pkgname}-${pkgver}.tar.xz ${pkgname}-${pkgver}/*
	md5sum ${pkgname}-${pkgver}.tar.xz
}
package(){
	cd "${srcdir}/chakra-${pkgname}"

	make install DESTDIR="${pkgdir}"
}

