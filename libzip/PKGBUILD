#
# Platform Packages for Chakra, part of chakra-project.org
#
# maintainer (i686): Phil Miller <philm[at]chakra-project[dog]org>
# maintainer (x86_64): Manuel Tortosa <manutortosa[at]chakra-project[dot]org>

# include global config
source ../_buildscripts/${current_repo}-${_arch}-cfg.conf

pkgname=libzip
pkgver=0.10
pkgrel=1
pkgdesc="A C library for reading, creating, and modifying zip archives"
url="http://www.nih.at/libzip/index.html"
license=('GPL2')
arch=('i686' 'x86_64')
depends=('zlib')
options=('!libtool')
source=("http://www.nih.at/${pkgname}/${pkgname}-${pkgver}.tar.gz"
        'fix-headers.patch')
md5sums=('47cdfcbc08c8bea0b52fdee4bf591622'
         '249395bd3a426c4c4e993e9d4753e1dd')

build() {
  cd ${srcdir}/${pkgname}-${pkgver}

  patch -p1 -i "${srcdir}/fix-headers.patch"
  ./configure --prefix=/usr
  make || return 1
}

package() {
  cd ${srcdir}/${pkgname}-${pkgver}
  make DESTDIR=${pkgdir} install || return 1
}
