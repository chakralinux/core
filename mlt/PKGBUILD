#
# Chakra Packages for Chakra, part of chakra-project.org
#
# maintainer (i686): Phil Miller <philm[at]chakra-project[dog]org>
# maintainer (x86_64): Manuel Tortosa <manutortosa[at]chakra-project[dot]org>

# include global config
source ../_buildscripts/${current_repo}-${_arch}-cfg.conf

# NOTE: Disabled the gtk2 module so no gtk-preview

pkgname=mlt
pkgver=0.7.2
pkgrel=1
pkgdesc="An open source multimedia framework"
arch=('i686' 'x86_64')
url="http://www.mltframework.org"
license=('GPL')
depends=('sdl_image' 'libsamplerate' 'libdv' 'qt' 'sox' 'libxml2' 'ffmpeg' 'frei0r-plugins' 'swig' 'python2')
optdepends=('jack')
makedepends=('subversion')
conflicts=('mlt++<=0.3.8')
source=(http://downloads.sourceforge.net/sourceforge/$pkgname/$pkgname-$pkgver.tar.gz)
md5sums=('3adeace6642a5ee0db0715b6bd7b7a52')

build() {
  cd $srcdir/$pkgname-$pkgver

  ./configure --prefix=/usr --enable-gpl --disable-mmx \
        --qimage-libdir=/usr/lib/ --qimage-includedir=/usr/include/Qt \
        --avformat-swscale --avformat-vdpau --disable-gtk2

  make || return 1
  make DESTDIR=$pkgdir install || return 1
}